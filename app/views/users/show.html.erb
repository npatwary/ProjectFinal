<% provide(:title, 'User-Profile') %>
<table align = "center" width = "97%">
  <tr><td>
<div style="float:right"> Hello, <%= @user.user_name %> </div>
<br>
<div style="float:right"><%= link_to "Log out", logout_path, method: "delete" %> </div>
<ul class="nav nav-pills" role="tablist">
  <li class="active"><%= link_to 'User Home', user_path(current_user)%></li>
  <li><%= link_to 'Games', games_path %></li>
  <li><%= link_to 'Player Characters', player_characters_path %></li>
  <li><%= link_to 'Game Invitations', game_invitations_path  %></li>
</ul>
<div>
  <ul>
    <li><%= link_to "Create new game",new_game_path,class: 'btn btn-link' %></li>
    <li><%= link_to "Create new player character",new_player_character_path,class: 'btn btn-link' %></li>
  </ul>
</div>
<h1>Pending Game Invitations Sent</h1>
<div>
<table class="table">
  <tr>
    <th>Game Name</th>
    <th>Invited Users</th>
    <th> &nbsp;&nbsp;</th>
  </tr>
  <% @user.game_invitations_sent.each do |game_invitation| %>
  <tr>
  	<td><%= game_invitation.game.name %></td>
	<td><%= game_invitation.user_player.user_name %></td>
	<td><%= link_to "Cancel", root_path %></td>
  </tr>
  <% end %>
  </table>
</div>
<h1>Pending Game Invitations Received</h1>
<div>
<table class="table">
  <tr>
    <th>Game Name</th>
    <th>Dungeon Master</th>
    <th>Game Password</th>
    <th colspan=2 > &nbsp;&nbsp;</th>
  </tr>
  <% @user.game_invitations_received.each do |game_invitation| %>
  <tr>
  	<td><%= game_invitation.game.name %></td>
	<td><%= game_invitation.dungeon_master.user_name %></td>
	<td><%= game_invitation.game_password %></td>
	<td><%= link_to "Accept", root_path %></td>
	<td><%= link_to "Reject", root_path %></td>
  </tr>
  <% end %>
  </table>
</div>
<h2> My Active Games </h2>
<div>
<table class="table">
  <tr>
    <th>Game Name</th>
    <th>Dungeon Master</th>
    <th>Player Character</th>
    <th colspan=3 > &nbsp;&nbsp;</th>
  </tr>
  <% @user.games_created.each do |game| %>
  <tr>
  	<td><%= game.name %></td>
  	<td>(me)</td>
  	<td>n/a</td>
  	<td><%= link_to "View", game_path(game),class: 'btn'  %></td>
  	<td><%= link_to "Edit", edit_game_path(game),class: 'btn' %></td>
  	<td><%= link_to "Delete", root_path, data: { confirm: 'Are you sure?' }, class: 'btn' %></td>
  </tr>
  <% end %>
  </table>
</div>
</td></tr>
</table>